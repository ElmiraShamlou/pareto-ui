name: PARETO-UI Build

on:
  workflow_dispatch:
    inputs:
      os-version:
        description: "Operating system version"
        type: choice
        options:
          - windows-latest
          - macos-latest
        default: windows-latest
      project-pareto-repo:
        description: "Project PARETO repository to build from"
        type: string
        default: project-pareto/project-pareto
      project-pareto-branch:
        description: "Branch or tag for the Project PARETO repository"
        type: string
        default: main
      project-pareto-version:
        type: string
        default: '1.1.0'
      package-build-number:
        description: "Package build number (optional). Will be autogenerated based on the date if not provided."
        type: string
      windows-installer-target:
        description: "Windows installer target. This will only affect windows builds."
        type: choice
        options:
          - nsis
          - portable
        default: windows-latest

jobs:
  electron-build:
    uses: ./.github/workflows/app_build.yml
    name: PARETO-UI Build ${{ inputs.os-version }}
    with:
      os-version: ${{ inputs.os-version }}
      package-build-number: ${{ inputs.package-build-number }}
      project-pareto-repo: ${{ inputs.project-pareto-repo }}
      project-pareto-branch: ${{ inputs.project-pareto-branch }}
      project-pareto-version: ${{ inputs.project-pareto-version }}
      windows-installer-target: ${{ inputs.windows-installer-target }}
    secrets: inherit
